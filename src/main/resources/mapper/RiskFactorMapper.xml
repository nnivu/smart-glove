<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.RiskFactorMapper">

    <!-- 原有查询：保留不变，不影响现有功能 -->
    <select id="selectAll" resultType="com.example.entity.RiskFactor">
        SELECT
            id,
            name,
            probability,
            impact_level AS impactLevel,
            related_area AS relatedArea,
            description,
            create_time AS createTime
        FROM risk_factor
        ORDER BY probability * impact_level DESC
    </select>

    <!-- 新增：上传（新增）风险因素 -->
    <insert id="insert" parameterType="com.example.entity.RiskFactor">
        INSERT INTO risk_factor (
            name,
            probability,
            impact_level,
            related_area,
            description,
            create_time,
            update_time
        ) VALUES (
                     #{name},
                     #{probability},
                     #{impactLevel},
                     #{relatedArea},
                     #{description},
                     #{createTime},
                     #{updateTime}
                 )
    </insert>

    <!-- 新增：根据ID修改风险因素 -->
    <update id="updateById" parameterType="com.example.entity.RiskFactor">
        UPDATE risk_factor
        SET
            name = #{name},
            probability = #{probability},
            impact_level = #{impactLevel},
            related_area = #{relatedArea},
            description = #{description},
            update_time = #{updateTime}
        WHERE id = #{id}
    </update>

    <!-- 新增：根据ID删除风险因素 -->
    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM risk_factor WHERE id = #{id}
    </delete>

    <!-- 新增：根据ID查询单个风险因素 -->
    <select id="selectById" parameterType="java.lang.Long" resultType="com.example.entity.RiskFactor">
        SELECT
            id,
            name,
            probability,
            impact_level AS impactLevel,
            related_area AS relatedArea,
            description,
            create_time AS createTime,
            update_time AS updateTime
        FROM risk_factor
        WHERE id = #{id}
    </select>

</mapper>